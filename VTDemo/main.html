<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>VOXTOX</title>
		<meta name="description" content="VoxTox">
		<meta name="author" content="Sam">
		
	</head>

	<body>
		<div>
			<header>
				<h1>VOXTOX</h1>
			</header>
			<canvas id="render"width="400"height="400"></canvas>
			<script type="text/javascript" src="resource/js/game.js"></script>
			<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
			<script type="text/javascript">
				var DEBUG = true;
				if(typeof console == "undefined"){
					DEBUG = false;
				}
				$.ajax({//Loading function
					url:"resource/xml/test.xml",
					dataType:"xml",
					success:function(xml) {
						var xml = $('xml',xml);
						//CanArrCount = parseInt(xml.find( "amount" ).text());
						//CanArr = new Array(CanArrCount);
						var Set = 0;
						$(xml).find("data").each(function()						{
						$(this).find("cell").each(function(){
							//CanArr[Set] = new Cpoint();
							//CanArr[Set].Name = $(this).find("name").text();
							//CanArr[Set].X = parseFloat($(this).find("box").find("posX").text());
							//CanArr[Set].Y = parseFloat($(this).find("box").find("posY").text());
							//CanArr[Set].SX = parseFloat($(this).find("box").find("sizeX").text());
							//CanArr[Set].SY = parseFloat($(this).find("box").find("sizeY").text());
							Set += 1;
						});
						});
					}
				});
				var canvas = document.getElementById('render');
				var ctx = canvas.getContext("2d");
				var worlds;
				//function 
				function MainLoop()
				{
					if(DEBUG){console.log("update");}
					//world.Update();
					if(worlds.Clear == true)//clear if updated
					{
						ctx.clearRect(0,0,100,100);
						worlds.Clear = false;
					}
					if(DEBUG){console.log("clear");}
					for(var i = 0;i <worlds.CellCount;++i)
					{
						if(worlds.CellRender[i] == true)
						{
							ctx.fillStyle = "#FF0000";//Render
							ctx.fillRect(worlds.Cells[i].X-10,worlds.Cells[i].Y-10,20,20); 
							worlds.CellRender[i] = false;
						}
					}
					worlds.Cells[0].X += 1;
					setTimeout("MainLoop()",200);
				}
				worlds = new World();
				if(DEBUG){console.log("built world");}
				//MainLoop();
			</script>
			<footer>
				<p>
				</p>
			</footer>
		</div>
	</body>
</html>
